<link rel="stylesheet" href="/public/css/styles.css">
<div class = "container">
    <div class = "img-container">
        <img src="https://pngimg.com/uploads/burger_sandwich/burger_sandwich_PNG4114.png" alt="burger_image">

    </div>
    <h1> Eat-Da-Burger</h1>
    <div class = "lists-container">
        <!--Not devoured -->
        <h3>Not Devoured</h3>
        <ul>
            {{#each burgers}}
            {{#with dataValues}}
            {{#unless isDevoured}}
            <li>
                Name: {{ dataValues.name}} <button class="devour" data-id = "{{id}}">Devour it</button>
            </li>
            {{/unless}}
            {{/each}}
        </ul>
<!-- devoured -->
<h3>Devoured</h3>
        <ul>
            {{#each burgers}}
            {{#if dataValues.isDevoured}}
            
            <li>
                Name: {{ dataValues.name}}
            </li>
            {{/if}}
            {{/each}}
        </ul>
    </div>
    <input type="text" id="newBurger">
</div>

<script src="http://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
    $("#newBurger").keydown(async (e) => {
        {{! -- When user hit enter --}}
        if(e.keyCode === 13) {
            const $currentTarget = $(e.currentTarget);
            const currentValue = $currentTarget.val();

            await $.ajax ({
                method: 'POST',
                url: '/api/burger/new',
                data: {
                    name: currentValue,
                }
            });

            location.reload();
        }
    })
    $(".devour").click((e) => {
        const $currentTarget = $(e.currentTarget);

        const id = $currentTarget.data('id');

        await $.ajax({
            method: 'PUT',
            url: `/api/burger/${id}/devour`
        });

        location.reload();
    });
</script>